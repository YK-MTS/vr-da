<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VR-DA - JLPT N2 èªå½™å…ˆè¡Œå‹èª­è§£ãƒ†ã‚¹ãƒˆ</title>
    <script src="https://www.gstatic.com/dialogflow-console/fast/messenger/bootstrap.js?v=1"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Noto Sans JP', 'Yu Gothic', 'Hiragino Sans', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            color: white;
            margin-bottom: 30px;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .header p {
            font-size: 1.1em;
            opacity: 0.9;
        }

        .main-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 20px;
        }

        .card {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }

        .full-width {
            grid-column: 1 / -1;
        }

        .card h2 {
            color: #667eea;
            margin-bottom: 15px;
            font-size: 1.5em;
            border-bottom: 2px solid #667eea;
            padding-bottom: 10px;
        }

        .passage-area {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            line-height: 1.8;
            font-size: 1.05em;
            max-height: 400px;
            overflow-y: auto;
        }

        .chat-container {
            height: 500px;
            display: flex;
            flex-direction: column;
        }

        #chat-frame {
            flex: 1;
            border: none;
            border-radius: 10px;
        }

        .problem-selector {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 15px;
        }

        .problem-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1em;
            font-weight: bold;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
        }

        .problem-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(102, 126, 234, 0.6);
        }

        .problem-btn:active {
            transform: translateY(0);
        }

        .info-box {
            background: #e3f2fd;
            border-left: 4px solid #2196f3;
            padding: 15px;
            margin: 15px 0;
            border-radius: 5px;
        }

        .info-box h3 {
            color: #1976d2;
            margin-bottom: 8px;
            font-size: 1.1em;
        }

        .info-box p {
            color: #424242;
            line-height: 1.6;
        }

        .flow-steps {
            display: flex;
            justify-content: space-between;
            margin-top: 15px;
            gap: 10px;
        }

        .step {
            flex: 1;
            background: #f5f5f5;
            padding: 15px;
            border-radius: 8px;
            text-align: center;
            border: 2px solid #e0e0e0;
        }

        .step-number {
            background: #667eea;
            color: white;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 10px;
            font-weight: bold;
        }

        .step-title {
            font-weight: bold;
            color: #333;
            margin-bottom: 5px;
        }

        .step-desc {
            font-size: 0.85em;
            color: #666;
        }

        @media (max-width: 768px) {
            .main-content {
                grid-template-columns: 1fr;
            }

            .header h1 {
                font-size: 1.8em;
            }

            .flow-steps {
                flex-direction: column;
            }

            .chat-container {
                height: 400px;
            }
        }

        .citation {
            font-size: 0.9em;
            color: #666;
            margin-top: 10px;
            font-style: italic;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ“š VR-DA</h1>
            <p>Vocabulary-First Reading - Dialogflow Agent</p>
            <p style="font-size: 0.9em; margin-top: 5px;">JLPT N2 èªå½™å…ˆè¡Œå‹èª­è§£ãƒ†ã‚¹ãƒˆ</p>
        </div>

        <div class="main-content">
            <!-- å·¦å´: å•é¡Œé¸æŠã¨ä½¿ã„æ–¹ -->
            <div class="card">
                <h2>ğŸ“‹ å•é¡Œé¸æŠ</h2>
                <div class="problem-selector">
                    <button class="problem-btn" onclick="loadProblem('VR01')">VR01</button>
                    <button class="problem-btn" onclick="loadProblem('VR02')">VR02</button>
                    <button class="problem-btn" onclick="loadProblem('VR03')">VR03</button>
                </div>

                <div class="info-box">
                    <h3>ğŸ’¡ ä½¿ã„æ–¹</h3>
                    <p>
                        1. ä¸‹ã®æœ¬æ–‡ã‚’èª­ã‚€<br>
                        2. å•é¡Œãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯<br>
                        3. ãƒãƒ£ãƒƒãƒˆã§èªå½™ãƒ†ã‚¹ãƒˆ<br>
                        4. ãƒ¡ã‚¤ãƒ³å•é¡Œã«å›ç­”
                    </p>
                </div>

                <div class="info-box" style="background: #fff3e0; border-left-color: #ff9800;">
                    <h3>ğŸ¯ å­¦ç¿’ã®æµã‚Œ</h3>
                    <div class="flow-steps">
                        <div class="step">
                            <div class="step-number">1</div>
                            <div class="step-title">èªå½™</div>
                            <div class="step-desc">3-5èª</div>
                        </div>
                        <div class="step">
                            <div class="step-number">2</div>
                            <div class="step-title">èª­è§£</div>
                            <div class="step-desc">CRå½¢å¼</div>
                        </div>
                        <div class="step">
                            <div class="step-number">3</div>
                            <div class="step-title">å››æŠ</div>
                            <div class="step-desc">MCå½¢å¼</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- å³å´: ãƒãƒ£ãƒƒãƒˆ -->
            <div class="card">
                <h2>ğŸ’¬ AIå¯¾è©±</h2>
                <div class="chat-container" style="display: flex; flex-direction: column;">
                    <df-messenger
                        intent="WELCOME"
                        chat-title="VR-DA"
                        agent-id="2a3265d7-57c6-4963-9d43-1a400200e7c7"
                        language-code="ja"
                        style="flex: 1; width: 100%; height: 100%;">
                    </df-messenger>
                </div>
            </div>

            <!-- æœ¬æ–‡è¡¨ç¤ºã‚¨ãƒªã‚¢ï¼ˆå…¨å¹…ï¼‰ -->
            <div class="card full-width">
                <h2 id="passage-title">ğŸ“– æœ¬æ–‡</h2>
                <div class="passage-area" id="passage-content">
                    <p style="color: #999; text-align: center; padding: 40px;">
                        ä¸Šã®å•é¡Œãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã¨ã€æœ¬æ–‡ãŒè¡¨ç¤ºã•ã‚Œã¾ã™
                    </p>
                </div>
            </div>
        </div>
    </div>

    <script>
        // å•é¡Œãƒ‡ãƒ¼ã‚¿
        const problems = {
            'VR01': {
                title: 'VR01: ã‚¤ãƒ³ãƒ•ãƒ¬ã¨è¡Œå‹•çµŒæ¸ˆå­¦',
                passage: `ã‚¤ãƒ³ãƒ•ãƒ¬ã§ã‚‚ã®ã®å€¤æ®µãŒä¸ŠãŒã£ã¦ã„ã£ãŸã¨ãã€ç§ãŸã¡ãŒæœ¬æ¥ã‚„ã‚‹ã¹ãã“ã¨ã¯ã€ã¿ã‚“ãªãŒè²·ã†ã®ã‚’ãã£ã¨æˆ‘æ…¢ã™ã‚‹ã“ã¨ãªã‚“ã§ã™ã€‚ãã†ã™ã‚Œã°éœ€è¦ãŒãŠã•ã¾ã‚Šã¾ã™ã‹ã‚‰ã€ç‰©ä¾¡ã®å€¤ä¸ŠãŒã‚Šã‚‚ãŠã•ã¾ã£ãŸã‚Šç©ã‚„ã‹ã«ãªã£ãŸã‚Šã—ã¾ã™ã€‚ã§ã‚‚å®‰ã„ã†ã¡ã«è²·ã†ã“ã¨ã‚’æˆ‘æ…¢ã™ã‚‹ãªã‚“ã¦ã€ãªã‹ãªã‹ã§ãã¾ã›ã‚“ã‚ˆã­ã€‚çµå±€ã¿ã‚“ãªä¸€äººã²ã¨ã‚ŠãŒæ—©ãè²·ãŠã†ã¨ã™ã‚‹ã€‚è‡ªåˆ†ã ã‘ãŒæ—©ãè²·ãˆã°å¾—ã‚’ã™ã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ãŒã€ã¿ã‚“ãªåŒã˜ã“ã¨ã‚’è€ƒãˆã¾ã™ã€‚

ã¿ã‚“ãªãŒåŒã˜ã“ã¨ã‚’ã‚„ã‚‹ã¨ä½•ãŒèµ·ãã‚‹ã®ã‹ã€‚ãŸã¨ãˆã°ã€ã‚µãƒƒã‚«ãƒ¼è¦³æˆ¦ã§ã¿ã‚“ãªãŒåº§ã£ã¦ã„ã‚‹ã¨ãã«ã€ä¸€äººã ã‘ç«‹ã¡ä¸ŠãŒã‚‹ã¨ã‚ˆãè¦‹ãˆã¾ã™ã­ã€‚ã§ã‚‚ã¿ã‚“ãªãŒåŒã˜ã“ã¨ã‚’è€ƒãˆã¦ä¸€æ–‰ã«ç«‹ã£ã¦ã—ã¾ã†ã¨ã€çµå±€ã¿ã‚“ãªãŒå‰ã‚ˆã‚Šè¦‹ãˆãªããªã£ã¦ã—ã¾ã„ã¾ã™ã€‚`,
                citation: 'ï¼ˆæ± ä¸Šå½°ã€æ± ä¸Šå½°ã®ã‚„ã•ã—ã„çµŒæ¸ˆå­¦2 ãƒ‹ãƒ¥ãƒ¼ã‚¹ãŒã‚ã‹ã‚‹ï¼ã€æ—¥æœ¬çµŒæ¸ˆæ–°èå‡ºç‰ˆç¤¾ã«ã‚ˆã‚‹ï¼‰'
            },
            'VR02': {
                title: 'VR02: æº–å‚™ä¸­',
                passage: 'å•é¡Œãƒ‡ãƒ¼ã‚¿ã‚’æº–å‚™ä¸­ã§ã™ã€‚',
                citation: ''
            },
            'VR03': {
                title: 'VR03: æº–å‚™ä¸­',
                passage: 'å•é¡Œãƒ‡ãƒ¼ã‚¿ã‚’æº–å‚™ä¸­ã§ã™ã€‚',
                citation: ''
            }
        };

        function loadProblem(problemId) {
            const problem = problems[problemId];
            
            // ã‚¿ã‚¤ãƒˆãƒ«æ›´æ–°
            document.getElementById('passage-title').textContent = `ğŸ“– ${problem.title}`;
            
            // æœ¬æ–‡æ›´æ–°
            const passageDiv = document.getElementById('passage-content');
            passageDiv.innerHTML = `
                <p>${problem.passage.replace(/\n/g, '</p><p>')}</p>
                ${problem.citation ? `<p class="citation">${problem.citation}</p>` : ''}
            `;
            
            // ãƒãƒ£ãƒƒãƒˆãƒ•ãƒ¬ãƒ¼ãƒ ã«å•é¡ŒIDã‚’é€ä¿¡ï¼ˆå®Ÿéš›ã¯Dialogflowã«é€ã‚‰ã‚Œã‚‹ï¼‰
            // ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒæ‰‹å‹•ã§å…¥åŠ›ã™ã‚‹å½¢å¼
            alert(`æœ¬æ–‡ã‚’èª­ã‚“ã§ã‹ã‚‰ã€ãƒãƒ£ãƒƒãƒˆã«ã€Œ${problemId}ã€ã¨å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚`);
        }

        // ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿æ™‚ã«VR01ã‚’è¡¨ç¤º
        window.onload = function() {
            loadProblem('VR01');
        };
    </script>
</body>
</html>